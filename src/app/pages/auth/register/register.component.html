<div class="container mt-4 pb-4 d-flex flex-column justify-content-center align-items-center">
  <div class="justify-content-center">

    <form class="border-bottom pb-5" #f="ngForm" (ngSubmit)="register(f)">
      <p class="h3 mb-3 fw-normal">Register an Account</p>
      <div class="row form-row">
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #nome="ngModel" name="nome" type="text" class="form-control" required>
            <label for="floatingInput">Nome*</label>
          </div>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #cognome="ngModel" name="cognome" type="text" class="form-control" required>
            <label for="floatingInput">Cognome*</label>
          </div>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #username="ngModel" name="username" type="text" class="form-control" [ngClass]="{'error': usernameExisting}" required (click)="resetUsername()">
            <label for="floatingInput" [ngClass]="{'error': usernameExisting}" id="username-error">Username*</label>
          </div>
          <p class="mb-1 position-relative error" *ngIf="usernameExisting">Username già registrato</p>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #email="ngModel" name="email" type="email" class="form-control" required [pattern]="emailRegex" [ngClass]="{'error': emailExisting}" (click)="resetEmail()">
            <label for="floatingInput" id="email-error" [ngClass]="{'error': emailExisting}">Email*</label>
          </div>
          <p class="mb-1 position-relative error" *ngIf="emailExisting">Email già registrata</p>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #password="ngModel" name="password" type="password" class="form-control" required [pattern]="passwordRegex" [ngClass]="{'error': passwordInvalid}" (click)="resetPassword()">
            <label for="floatingInput" [ngClass]="{'error': passwordInvalid}" id="password-error">Password* (4-18 caratteri)</label>
          </div>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #confermaPassword="ngModel" name="conferma-password" type="password" class="form-control" required [ngClass]="{'error': passwordInvalid}" (click)="resetPassword()">
            <label for="floatingInput" [ngClass]="{'error': passwordInvalid}" id="conferma-password-error">Conferma password*</label>
          </div>
          <p class="mb-1 position-relative error" *ngIf="passwordInvalid">Le due password non coincidono</p>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <input ngModel #dataDiNascita="ngModel" name="data-di-nascita" type="date" class="form-control" required>
            <label for="floatingInput">Data di nascita*</label>
          </div>
        </div>
        <div class="col col-12 col-md-6">
          <div class="form-floating mb-2">
            <select ngModel #genere="ngModel" name="genere" class="form-control" required>
              <option value=""></option>
              <option value="uomo">Uomo</option>
              <option value="donna">Donna</option>
              <option value="non-binary">Non binary</option>
              <option value="web-developer">Web developer</option>
              <option value="non-specificato">Non specificato</option>
            </select>
            <label for="floatingInput">Genere*</label>
          </div>
        </div>
      </div>
      <button class="btn btn-primary w-100 py-2" [disabled]="f.invalid">Register Now</button>
    </form>

    <div class="d-flex flex-column justify-content-center align-items-center">
      <p class="mt-3">Already have an account?</p>
      <a class="btn btn-outline-primary" routerLink="/auth/login">Sign In</a>
    </div>
  </div>

  <div class="alert text-white position-fixed error-message" *ngIf="error">Si è verificato un errore</div>
</div>

<div class="outer-spinner-div position-fixed d-flex justify-content-center align-items-center" *ngIf="loading">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
